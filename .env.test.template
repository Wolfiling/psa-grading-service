# ===============================================
# PSA GRADING APPLICATION - TESTS TEMPLATE
# ===============================================
# ğŸ§ª Configuration pour les tests automatisÃ©s GitHub Actions
# ğŸš€ OptimisÃ©e pour PostgreSQL service dans les workflows
# ğŸ’¡ Valeurs de test sÃ©curisÃ©es et isolÃ©es

# ===============================================
# ğŸŒ ENVIRONNEMENT DE TEST
# ===============================================

# Environment test
NODE_ENV=test

# Port test (Ã©viter conflits)
PORT=5001

# Configuration proxy dÃ©sactivÃ©e en test
TRUST_PROXY=false

# ===============================================
# ğŸ—ƒï¸ BASE DE DONNÃ‰ES TEST
# ===============================================

# PostgreSQL service GitHub Actions
# Configuration automatique dans le workflow
DATABASE_URL=postgresql://test_user:test_password@localhost:5432/psa_grading_test

# Configuration SSL dÃ©sactivÃ©e pour tests
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=false

# Pool rÃ©duit pour tests
DB_POOL_MIN=2
DB_POOL_MAX=5
DB_POOL_IDLE_TIMEOUT=10000

# ===============================================
# ğŸ” SECRETS DE TEST (NON SENSIBLES)
# ===============================================

# Mots de passe test (non sÃ©curisÃ©s pour CI)
ADMIN_PASSWORD=test123!
SESSION_SECRET=test_session_secret_1234567890abcdef
PSA_SECRET=test_psa_secret_1234567890abcdef
JWT_SECRET=test_jwt_secret_1234567890abcdef
PSA_CLIENT_SECRET=test_client_secret_1234567890abcdef

# ===============================================
# ğŸŒ CONFIGURATION RÃ‰SEAU TEST
# ===============================================

# URLs test
ALLOWED_ORIGINS=http://localhost:5001,http://127.0.0.1:5001
PUBLIC_URL=http://localhost:5001

# ===============================================
# ğŸ“§ SERVICES EXTERNES (MOCK EN TEST)
# ===============================================

# Service email dÃ©sactivÃ© en test
BREVO_API_KEY=test_brevo_key_not_real

# PSA credentials test (non fonctionnels)
PSA_EMAIL=test@psa-test.com
PSA_PASSWORD=test_password_not_real

# Taskmaster test (mock)
TASKMASTER_API_URL=http://localhost:3001/api/mock
TASKMASTER_API_KEY=test_taskmaster_key

# ===============================================
# ğŸ›ï¸ SHOPIFY TEST (MOCK)
# ===============================================

# Configuration Shopify test (non fonctionnelle)
SHOPIFY_SHOP_DOMAIN=test-shop.myshopify.com
SHOPIFY_ADMIN_ACCESS_TOKEN=shpat_test_not_real
SHOPIFY_STOREFRONT_ACCESS_TOKEN=test_storefront_not_real

# ===============================================
# ğŸ“Š CONFIGURATION TEST
# ===============================================

# Logging test (verbose pour debugging)
LOG_LEVEL=debug
LOG_DIR=./logs/test

# Performance test (limites rÃ©duites)
MAX_UPLOAD_SIZE=5
RATE_LIMIT_MAX=1000
REQUEST_TIMEOUT=10000

# SÃ©curitÃ© relÃ¢chÃ©e pour tests
SECURITY_HEADERS=false
ENABLE_COMPRESSION=false
ENABLE_METRICS=false

# ===============================================
# ğŸ” CONFIGURATION SPÃ‰CIALE CI/CD
# ===============================================

# Variables pour GitHub Actions
CI=true
GITHUB_ACTIONS=true

# Timeouts rÃ©duits pour CI
CONNECTION_TIMEOUT=5000
QUERY_TIMEOUT=5000

# DÃ©sactiver fonctionnalitÃ©s non testables
DISABLE_EXTERNAL_SERVICES=true
MOCK_PSA_SCRAPER=true
MOCK_EMAIL_SENDING=true

# ===============================================
# ğŸ“ UTILISATION DANS GITHUB ACTIONS
# ===============================================

# Ce fichier est copiÃ© automatiquement vers .env.test
# dans le workflow GitHub Actions avant l'exÃ©cution des tests

# Exemple dans deploy.yml:
# - name: 'Setup Test Environment'
#   run: |
#     cp .env.test.template .env.test
#     echo "DATABASE_URL=postgresql://test_user:test_password@localhost:5432/psa_grading_test" >> .env.test

# ===============================================
# ğŸ§ª COMMANDES DE TEST SUPPORTÃ‰ES
# ===============================================

# npm run test              # Tests unitaires de base
# npm run test:coverage     # Tests avec couverture
# npm run test:integration  # Tests d'intÃ©gration
# npm run test:e2e          # Tests bout en bout (si implÃ©mentÃ©s)
# npm run security:validate # Validation sÃ©curitÃ©

# Variables pour coverage
COVERAGE_THRESHOLD=80
COVERAGE_REPORTERS=text,lcov,json

# ===============================================
# ğŸš¨ NOTES IMPORTANTES
# ===============================================

# âœ… Ces valeurs sont SEULEMENT pour les tests
# âœ… Aucune donnÃ©e sensible ou rÃ©elle  
# âœ… Base de donnÃ©es effacÃ©e aprÃ¨s chaque test
# âœ… Services externes mockÃ©s automatiquement
# âŒ NE PAS utiliser ces valeurs en production
# âŒ NE PAS modifier sans impact sur CI/CD