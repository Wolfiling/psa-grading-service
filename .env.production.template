# ===============================================
# PSA GRADING APPLICATION - PRODUCTION CONFIG TEMPLATE
# ===============================================
# üìã TEMPLATE DE CONFIGURATION POUR VPS OVH
# üö® COPIEZ CE FICHIER EN .env ET RENSEIGNEZ TOUTES LES VALEURS R√âELLES
# üîí NE JAMAIS COMMITER LE FICHIER .env AVEC LES VRAIES VALEURS !
# üìç CE TEMPLATE CONTIENT TOUTES LES VARIABLES OBLIGATOIRES POUR LA PRODUCTION

# ===============================================
# üåç 1. ENVIRONNEMENT ET SERVEUR
# ===============================================

# Environment (OBLIGATOIRE - ne pas modifier)
NODE_ENV=production

# Port d'√©coute de l'application (d√©faut: 5000)
# Recommandation OVH: utiliser reverse proxy nginx sur 80/443
PORT=5000

# Domaines autoris√©s pour CORS (OBLIGATOIRE pour VPS OVH)
# Format: liste s√©par√©e par virgules des domaines autoris√©s
# Exemple: https://votre-domaine.com,https://www.votre-domaine.com
ALLOWED_ORIGINS=https://votre-domaine.com,https://www.votre-domaine.com

# URL publique de votre application (pour emails et redirections)
# Exemple: https://votre-domaine.com
PUBLIC_URL=https://votre-domaine.com

# ===============================================
# üîê 2. SECRETS DE S√âCURIT√â CRITIQUE (CHANGER TOUS)
# ===============================================

# PASSWORD ADMINISTRATEUR (OBLIGATOIRE - CHANGEZ IMP√âRATIVEMENT)
# Format: Mot de passe ultra-s√©curis√© 20+ caract√®res
# Exigences: majuscules, minuscules, chiffres, symboles sp√©ciaux
# G√©n√©rateur recommand√©: https://bitwarden.com/password-generator/
ADMIN_PASSWORD=REMPLACEZ_PAR_MOT_DE_PASSE_ULTRA_SECURISE

# SECRET DE SESSION (OBLIGATOIRE - G√âN√âRER AL√âATOIREMENT)
# Format: Cha√Æne al√©atoire s√©curis√©e de 64+ caract√®res
# Commande g√©n√©ration: openssl rand -base64 64
SESSION_SECRET=REMPLACEZ_PAR_SECRET_SESSION_ALEATOIRE

# SECRET APPLICATION PSA (OBLIGATOIRE - G√âN√âRER AL√âATOIREMENT)  
# Format: Cha√Æne al√©atoire s√©curis√©e de 64+ caract√®res
# Commande g√©n√©ration: openssl rand -base64 64
PSA_SECRET=REMPLACEZ_PAR_SECRET_PSA_ALEATOIRE

# SECRET JWT (OBLIGATOIRE - G√âN√âRER AL√âATOIREMENT)
# Format: Cha√Æne al√©atoire s√©curis√©e de 64+ caract√®res
# Commande g√©n√©ration: openssl rand -base64 64
JWT_SECRET=REMPLACEZ_PAR_SECRET_JWT_ALEATOIRE

# SECRET CLIENT (OBLIGATOIRE - G√âN√âRER AL√âATOIREMENT)
# Format: Cha√Æne al√©atoire s√©curis√©e de 64+ caract√®res
PSA_CLIENT_SECRET=REMPLACEZ_PAR_SECRET_CLIENT_ALEATOIRE

# ===============================================
# üóÑÔ∏è 3. BASE DE DONN√âES POSTGRESQL OVH
# ===============================================

# URL de connexion PostgreSQL (OBLIGATOIRE)
# Format OVH: postgresql://username:password@host:port/database?sslmode=require
# Remplacez par vos identifiants PostgreSQL OVH r√©els
DATABASE_URL=postgresql://username:password@postgresql-host.ovh.net:5432/psa_grading_prod?sslmode=require

# Configuration pool de connexions (optimis√© production)
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=60000

# SSL Database (OBLIGATOIRE en production)
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=true

# ===============================================
# üìß 4. SERVICES EXTERNES (REMPLACER LES CL√âS)
# ===============================================

# Service Email Brevo/Sendinblue (OBLIGATOIRE)
# Obtenez votre cl√© API depuis: https://app.brevo.com/settings/keys/api
BREVO_API_KEY=REMPLACEZ_PAR_VOTRE_CLE_BREVO_REELLE

# Taskmaster API (si utilis√©)
TASKMASTER_API_URL=https://votre-taskmaster.com/api/external
TASKMASTER_API_KEY=REMPLACEZ_PAR_VOTRE_CLE_TASKMASTER

# ===============================================
# üõçÔ∏è 5. INT√âGRATION SHOPIFY (si utilis√©e)
# ===============================================

# Configuration Shopify (si int√©gration paiement activ√©e)
SHOPIFY_SHOP_DOMAIN=votre-boutique.myshopify.com
SHOPIFY_ADMIN_ACCESS_TOKEN=shpat_REMPLACEZ_PAR_TOKEN_ADMIN_REEL
SHOPIFY_STOREFRONT_ACCESS_TOKEN=REMPLACEZ_PAR_TOKEN_STOREFRONT

# ===============================================
# üéØ 6. INT√âGRATION PSA (pour scraping des statuts)
# ===============================================

# Identifiants compte PSA Japan (OBLIGATOIRES)
# Utilisez un compte d√©di√© professionnel PSA
PSA_EMAIL=votre-email-psa@votredomaine.com
PSA_PASSWORD=REMPLACEZ_PAR_MOT_DE_PASSE_PSA_REEL

# ===============================================
# üìä 7. MONITORING ET LOGGING
# ===============================================

# Niveau de logs en production (recommand√©: info)
LOG_LEVEL=info

# Rotation des logs (jours)
LOG_RETENTION_DAYS=30

# R√©pertoire des logs (sera cr√©√© automatiquement)
LOG_DIR=/var/log/psa-grading

# Monitoring (optionnel)
ENABLE_METRICS=true
METRICS_PORT=9090

# Configuration rotation logs PM2 (OBLIGATOIRE)
# Taille max avant rotation (MB)
PM2_LOG_MAX_SIZE=10M
# Nombre de fichiers √† conserver
PM2_LOG_RETAIN=10
# Compression des anciens logs
PM2_LOG_COMPRESS=true

# ===============================================
# ‚ö° 8. OPTIMISATIONS PERFORMANCE
# ===============================================

# Compression (recommand√©: activ√©)
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# Cache statique (secondes)
STATIC_CACHE_MAX_AGE=31536000

# Rate limiting (requ√™tes par minute)
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# ===============================================
# üìç 9. CONFIGURATION OVH SP√âCIFIQUE
# ===============================================

# Trust proxy (OBLIGATOIRE pour OVH derri√®re load balancer)
TRUST_PROXY=true

# Headers de s√©curit√© renforc√©s
SECURITY_HEADERS=true

# Mode de d√©ploiement
DEPLOYMENT_MODE=ovh-vps

# ===============================================
# ‚úÖ 10. VARIABLES OPTIONNELLES
# ===============================================

# Mode debug (INTERDITE en production)
# DEBUG=false

# Timeout global (millisecondes)
REQUEST_TIMEOUT=30000

# Taille max upload (MB)
MAX_UPLOAD_SIZE=10

# ===============================================
# üìù INSTRUCTIONS DE CONFIGURATION
# ===============================================

# 1. Copiez ce fichier: cp .env.production.template .env
# 2. Remplacez TOUTES les valeurs "REMPLACEZ_PAR_*" par vos vraies valeurs
# 3. G√©n√©rez tous les secrets al√©atoires avec: openssl rand -base64 64
# 4. Configurez PostgreSQL OVH avec SSL
# 5. Ajoutez votre domaine dans ALLOWED_ORIGINS
# 6. V√©rifiez que tous les services externes sont configur√©s
# 7. TESTEZ en mode staging avant production !

# ===============================================
# üö® S√âCURIT√â - POINTS DE VIGILANCE
# ===============================================
# ‚ö†Ô∏è  NE JAMAIS commiter .env avec les vraies valeurs
# ‚ö†Ô∏è  Utilisez des mots de passe diff√©rents pour chaque service
# ‚ö†Ô∏è  Activez 2FA sur tous vos comptes (Brevo, PSA, OVH)
# ‚ö†Ô∏è  Renouvelez les secrets p√©riodiquement
# ‚ö†Ô∏è  Surveillez les logs pour d√©tecter les tentatives d'intrusion
# ‚ö†Ô∏è  Sauvegardez r√©guli√®rement votre base de donn√©es